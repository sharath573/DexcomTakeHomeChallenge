require 'selenium-webdriver'
require 'open-uri'
require 'json'
require 'yaml'
require 'os'

##==============================================================================================================#
#*********************************************** DATE & TIME ***************************************************#
##==============================================================================================================#
date_time_format = "%Y_%m_%D-%H-%M"
DATE_TIME = Time.now.strftime(date_time_format)

##==============================================================================================================#
#************************************** SETTING UP ENVIRONMENT VARIABLES ***************************************#
##==============================================================================================================#
TAG = ENV['TAG']
PLATFORM = ENV['PLATFORM'].downcase
TARGET = ENV['TARGET'].downcase
UDID = (ENV['UDID'] || nil)
HOST = (ENV['HOST'] || '127.0.0.1')
##==============================================================================================================#
#**************************************** SETTING UP GLOBAL VARIABLES ******************************************#
##==============================================================================================================#
$do_log = ENV['do_log'] || "true"
$product = ENV['PRODUCT'].downcase
$scenario = nil
$platform = PLATFORM.match(/^native_/) ? PLATFORM : "native_" + PLATFORM
$environment = 'ios'
##==============================================================================================================#
#********************************************** REPORT PATH ****************************************************#
#  Cucumber Report
##==============================================================================================================#
# Report Path
  $report_path = "./output/#{$product}_#{DATE_TIME}/"
unless File.directory?($report_path)
  FileUtils.mkdir_p($report_path)
end

##==============================================================================================================#
#**************************** DEEP MERGE - mapping & mapping_desc & config.yml *********************************#
##==============================================================================================================#
$config = YAML::load(File.open("config/config.yml"))
$config_desc = YAML::load(File.open("config/config.yml"))


